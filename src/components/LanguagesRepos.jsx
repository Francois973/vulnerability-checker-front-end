import React from "react";
import { useState, useEffect } from "react";

const LanguagesRepos = ({ url }) => {
  const [languges, setLanguages] = useState("");

  useEffect(() => {
    const fetchLanguages = async () => {
      try {
        const response = await fetch(
          `https://api.github.com/repos/Francois973/Airbnplane/languages`,
          {
            headers: new Headers({
              Authorization: JSON.stringify(import.meta.env),
            }),
          }
        );
        if (!response.ok) {
          throw new Error(
            "Sorry... This username is maybe unknown or the limit is over"
          );
        } else {
          const data = await response.json();
          setLanguages(data);
        }
      } catch (error) {
        setError(error.message);
      }
    };
    fetchLanguages();
  }, [url]);
  return (
    <div className="pt-4">
      {console.log(languges)}
      {Object.entries(languges).map(([key, value]) => (
        <li key={key} className="pt-1 flex flex-row gap-x-5 justify-start">
          <span className="w-[10vw]">{`${key}:`}</span>
          <span className="w-[10vw]">{`${value} lines`}</span>
        </li>
      ))}
    </div>
  );
};

export default LanguagesRepos;
